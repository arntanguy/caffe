Introduction
############

Here are a set of tools that can be used to understand how to get feature descriptors from convolutional
neural networks (CNN).
We are currently using the Caffe framwork [http://caffe.berkeleyvision.org], and particularely the 
pre-trained ImageNet network.
The goal is to provide tools that makes it easier to understand CNNs, which we hope could eventually lead
to new ways of doing image matching, based on features generated by these networks. One possible use of this
could be to improve loop-closure detection in SLAM systems.


Setup
#####

Installing Caffe:
-----------------

Install caffe on Archlinux:
- Look at the Installation Instruction: http://caffe.berkeleyvision.org/installation.html

I had to make the following changes to get it to run on Archlinux:

- Install python2-numpy-openblas
- Change the makefile from LIBRARIES += cblas atlas
    to LIBRARIES += opeblas
- Fill in path in Makefile.config
- Build using make && make distribute

Don't forget to put the distribute folder in python path!

Configuring the code
--------------------

First you need to download the imagenet pretrained network.
To do that, run the script <CAFFE_ROOT>/examples/imagenet/get_caffe_reference_imagenet_model.sh
See [http://nbviewer.ipython.org/github/BVLC/caffe/blob/master/examples/imagenet_pretrained.ipynb] for details.


Programs included
#################

feature_distance:
-----------------

This program computes the feature descriptor and distances using the ConvNet neural network.
Descriptors can be extracted from the last 3 layers (fc6, fc7 and fc8 layers).

Generate the input file using the rgbd dataset tool:

    associate.py rgb.txt groundtruth.txt > input_file.txt


display_plot:
-------------

This programs displays the feature distances computed by the feature_distance program. 
